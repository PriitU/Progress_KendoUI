webpackJsonp([1],{384:function(e,t,o){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=o(6),i=r(n),a=o(402),c=(r(a),o(414)),s=r(c),l=o(415),d=r(l),u=o(435),f=r(u),p=o(436),h=r(p),m=o(439),b=r(m),v=o(437),$=r(v),C=o(438),y=r(C);t.default=i.default.module("views.contracts.customer-contracts",[]).controller("ContractsCustomerContractsCtrl",s.default).factory("contractsCustomerContracts",d.default).run(["$templateCache",function(e){e.put("views.contracts.customer-contracts.bottomSection.html",f.default),e.put("views.contracts.customer-contracts.middleSection.html",h.default),e.put("views.contracts.customer-contracts.topSection.html",b.default),e.put("views.contracts.customer-contracts.topChildSection.html",$.default),e.put("views.contracts.customer-contracts.topParentSection.html",y.default)}]).name},402:function(e,t,o){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),i=function(){function e(t,o){var n=this;r(this,e),this.$scope=t,this.$dataProviderService=o.get("providerService"),this.$dsService=o.get("dsService"),this.$parentDs=new kendo.data.DataSource({transport:this.$dataProviderService.getTransport("ProjectData",{jsdo:"beCustomerContracts",tableRef:"ttCustomer"}),type:"jsdo",pageSize:10}),"progress-data-provider"===this.$dataProviderService.dataProviders.ProjectData.type&&(this.$jsdoInstance=new progress.data.JSDO({name:"beCustomerContracts"}),this.$parentDs.transport.jsdo=this.$jsdoInstance),this.$parentDs.bind("error",this._$errorHandler.bind(this)),this.$childDs=new kendo.data.DataSource({transport:this.$dataProviderService.getTransport("ProjectData",{jsdo:"beCustomerContracts",tableRef:"ttContract",readLocal:!0}),type:"jsdo",pageSize:10}),"progress-data-provider"===this.$dataProviderService.dataProviders.ProjectData.type&&(this.$childDs.transport.jsdo=this.$jsdoInstance),this.$childDs.bind("error",this._$errorHandler.bind(this)),this.$childDs.bind("change",this._$changeHandler.bind(this)),this.$model={parentField:"CustomerId",childField:"CustomerId",parentTitle:"Customers",childTitle:"Contracts",parentGridOptions:{pageable:{pageSize:10,refresh:!0},filterable:!1,groupable:!1,resizable:!1,reorderable:!1,sortable:!1,selectable:!0,columns:[{encoded:!0,field:"FirstName",filterable:!0,format:"",sortable:!0,title:"First Name"},{encoded:!0,field:"LastName",filterable:!0,format:"",sortable:!0,title:"Last Name"},{encoded:!0,field:"IdCode",filterable:!0,format:"",sortable:!0,title:"Id Code"}],dataSource:this.$parentDs},childGridOptions:{autoBind:!1,pageable:{pageSize:10,refresh:!0},messages:{commands:{cancel:"Cancel",create:"New",save:"Save",canceledit:"Cancel",destroy:"Delete",edit:"Edit",update:"Update"}},editable:"popup",filterable:!1,groupable:!1,resizable:!1,reorderable:!1,sortable:!1,columns:[{encoded:!0,field:"ContractId",filterable:!0,format:"",sortable:!0,title:"ContractId"},{encoded:!0,field:"ContractNr",filterable:!0,format:"",sortable:!0,title:"ContractNr"},{encoded:!0,field:"CustomerId",filterable:!0,format:"",sortable:!0,title:"CustomerId"},{encoded:!0,field:"Amount",filterable:!0,format:"",sortable:!0,title:"Amount"},{encoded:!0,field:"AmountLeft",filterable:!0,format:"",sortable:!0,title:"AmountLeft"},{encoded:!0,field:"ContractStatus",filterable:!0,format:"",sortable:!0,title:"ContractStatus"},{encoded:!0,field:"TimeIn",filterable:!0,format:"{0:g}",sortable:!0,title:"TimeIn"},{encoded:!0,field:"TimeEnded",filterable:!0,format:"{0:g}",sortable:!0,title:"TimeEnded"},{encoded:!0,field:"PaymentDate",filterable:!0,format:"{0:g}",sortable:!0,title:"PaymentDate"}],dataSource:this.$childDs,selectable:"row"},customSections:{top:"views.contracts.customer-contracts.topSection.html",topParent:"views.contracts.customer-contracts.topParentSection.html",topChild:"views.contracts.customer-contracts.topChildSection.html",middle:"views.contracts.customer-contracts.middleSection.html",bottom:"views.contracts.customer-contracts.bottomSection.html"},parentGridEvents:{onDataBound:function(e){n._$dataBoundHandler(e)},onRowSelect:function(e){n._$rowSelectHandler(e),n.onParentRowSelect(e)}},childGridEvents:{onRowSelect:function(e){n.onChildRowSelect(e)},onDataBound:function(e){},onRowCreate:function(e){},onRowUpdate:function(e){},onRowDelete:function(e){}}}}return n(e,[{key:"$onInit",value:function(){var e=this;this.$scope.$on("$includeContentLoaded",function(){e.includeContentLoaded&&e.includeContentLoaded()}),this.$scope.$on("$viewContentLoaded",function(t){e.onShow&&e.onShow(t.currentScope)}),this.$scope.$on("$includeContentError",function(t){e.includeContentError&&e.includeContentError(t)}),this.$scope.$on("$destroy",this._$destroy.bind(this))}},{key:"_$dataBoundHandler",value:function(e){var t=this;this.$scope.$evalAsync(function(){t.$parentGrid.select("tr[data-uid]:eq(0)")})}},{key:"_$rowSelectHandler",value:function(e){var t=this.$childDs.filter(),o=[],r=this.$parentGrid.dataItem(this.$parentGrid.select()),n=this._$getChildFilter(r),i=!0,a=0;if(t){for(o=t.filters,a=0;a<o.length;a++)if(o[a].field==n.field){i=!1;break}i?o.push(n):o[a]=n}else o.push(n);this.$childDs.filter(o)}},{key:"_$getChildFilter",value:function(e){return{field:"CustomerId",operator:"eq",value:e.CustomerId}}},{key:"_$errorHandler",value:function(e){var t=this.$dsService.extractErrorMessage(e);this.$scope.$emit("notification",{type:"error",message:t})}},{key:"_$changeHandler",value:function(e){var t=this;if("add"==e.action){var o=e.sender.filter().filters.filter(function(e){return e.field===t.$model.parentField})[0].value;e.items[0].set(this.$model.parentField,o)}}},{key:"_$destroy",value:function(){this.$parentDs.unbind("error",this._$errorHandler),this.$childDs.unbind("error",this._$errorHandler),this.$childDs.unbind("change",this._$changeHandler)}}]),e}();t.default=i},414:function(e,t,o){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,o,r){return o&&e(t.prototype,o),r&&e(t,r),t}}(),c=o(402),s=function(e){return e&&e.__esModule?e:{default:e}}(c),l=function(e){function t(e,o,i){return r(this,t),n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,o))}return i(t,e),a(t,[{key:"includeContentLoaded",value:function(){}},{key:"includeContentError",value:function(e){}},{key:"onShow",value:function(e){console.log("Show")}},{key:"onParentRowSelect",value:function(e){}},{key:"onChildRowSelect",value:function(e){}}]),t}(s.default);l.$inject=["$scope","$injector","stateData"],t.default=l},415:function(e,t,o){"use strict";function r(e,t){function o(){this.scope=null}return o.prototype={onInit:function(e){return console.log("Init",e),{}},onHide:function(e){console.log("hide",e)}},new o}Object.defineProperty(t,"__esModule",{value:!0}),r.$inject=["$q","dsService"],t.default=r},435:function(e,t){e.exports=""},436:function(e,t){e.exports=""},437:function(e,t){e.exports=""},438:function(e,t){e.exports=""},439:function(e,t){e.exports=""}});
webpackJsonp([2],{382:function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=o(6),i=n(r),a=o(400),l=(n(a),o(410)),c=n(l),d=o(411),s=n(d),u=o(428),f=n(u),h=o(427),p=n(h),b=o(431),v=n(b),m=o(429),$=n(m),y=o(430),C=n(y);e.default=i.default.module("views.contracts.contracts-history",[]).controller("ContractsContractsHistoryCtrl",c.default).factory("contractsContractsHistory",s.default).run(["$templateCache",function(t){t.put("views.contracts.contracts-history.bottomSection.html",f.default),t.put("views.contracts.contracts-history.bottomChildSection.html",p.default),t.put("views.contracts.contracts-history.topSection.html",v.default),t.put("views.contracts.contracts-history.topChildSection.html",$.default),t.put("views.contracts.contracts-history.topParentSection.html",C.default)}]).name},400:function(t,e,o){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),i=function(){function t(e,o){var r=this;n(this,t),this.$scope=e,this.$dataProviderService=o.get("providerService"),this.$dsService=o.get("dsService"),this.$compile=o.get("$compile"),this.$childDataSources=[],this.$childGrids=[],this.$parentDs=new kendo.data.DataSource({transport:this.$dataProviderService.getTransport("ProjectData",{jsdo:"beViewHistory",tableRef:"ttContract"}),type:"jsdo",pageSize:10}),"progress-data-provider"===this.$dataProviderService.dataProviders.ProjectData.type&&(this.$jsdoInstance=new progress.data.JSDO({name:"beViewHistory"}),this.$parentDs.transport.jsdo=this.$jsdoInstance),this.$parentDs.bind("error",this._$errorHandler.bind(this)),this.$model={parentField:"ContractId",childField:"ContractId",parentTitle:"Contracts",childTitle:"History",parentGridOptions:{detailInit:function(t){r.$model.parentGridEvents.onDetailInit(t)},pageable:{pageSize:10,refresh:!0},filterable:!1,groupable:!1,resizable:!1,reorderable:!1,sortable:!1,selectable:!0,columns:[{encoded:!0,field:"ContractNr",filterable:!0,format:"",sortable:!0,title:"Contract Nr"},{encoded:!0,field:"Amount",filterable:!0,format:"",sortable:!0,title:"Amount"},{encoded:!0,field:"AmountLeft",filterable:!0,format:"",sortable:!0,title:"Amount Left"},{encoded:!0,field:"ContractStatus",filterable:!0,format:"",sortable:!0,title:"Contract Status"},{encoded:!0,field:"TimeIn",filterable:!0,format:"{0:g}",sortable:!0,title:"Time In"},{encoded:!0,field:"TimeEnded",filterable:!0,format:"{0:g}",sortable:!0,title:"Time Ended"},{encoded:!0,field:"PaymentDate",filterable:!0,format:"{0:g}",sortable:!0,title:"Payment Date"}],dataSource:this.$parentDs},childGridOptions:{pageable:{pageSize:5,refresh:!0},editable:"readonly",filterable:!1,groupable:!1,resizable:!1,reorderable:!1,sortable:!1,columns:[{encoded:!0,field:"ContractHistoryId",filterable:!0,format:"",sortable:!0,title:"ContractHistoryId"},{encoded:!0,field:"CustomerId",filterable:!0,format:"",sortable:!0,title:"CustomerId"},{encoded:!0,field:"ContractNr",filterable:!0,format:"",sortable:!0,title:"ContractNr"},{encoded:!0,field:"Amount",filterable:!0,format:"",sortable:!0,title:"Amount"},{encoded:!0,field:"AmountLeft",filterable:!0,format:"",sortable:!0,title:"AmountLeft"},{encoded:!0,field:"ContractStatus",filterable:!0,format:"",sortable:!0,title:"ContractStatus"},{encoded:!0,field:"ContractId",filterable:!0,format:"",sortable:!0,title:"ContractId"},{encoded:!0,field:"TimeIn",filterable:!0,format:"{0:g}",sortable:!0,title:"TimeIn"},{encoded:!0,field:"TimeEnded",filterable:!0,format:"{0:g}",sortable:!0,title:"TimeEnded"},{encoded:!0,field:"PaymentDate",filterable:!0,format:"",sortable:!0,title:"PaymentDate"},{encoded:!0,field:"Edit",filterable:!0,format:"",sortable:!0,title:"Edit"}],dataSource:null,selectable:"row"},customSections:{top:"views.contracts.contracts-history.topSection.html",topParent:"views.contracts.contracts-history.topParentSection.html",topChild:"views.contracts.contracts-history.topChildSection.html",bottomChild:"views.contracts.contracts-history.bottomChildSection.html",bottom:"views.contracts.contracts-history.bottomSection.html"},parentGridEvents:{onDetailInit:function(t){r._$detailInitHandler(t)},onDetailExpand:function(t){},onDetailCollapse:function(t){},onDataBound:function(t){r._$dataBoundHandler(t)},onRowSelect:function(t){r.onParentRowSelect(t)}},childGridEvents:{onRowSelect:function(t){r.onChildRowSelect(t)},onDataBound:function(t){},onRowCreate:function(t){},onRowUpdate:function(t){},onRowDelete:function(t){}}}}return r(t,[{key:"$onInit",value:function(){var t=this;this.$scope.$on("$includeContentLoaded",function(){t.includeContentLoaded&&t.includeContentLoaded()}),this.$scope.$on("$viewContentLoaded",function(e){t.onShow&&t.onShow(e.currentScope)}),this.$scope.$on("$includeContentError",function(e){t.includeContentError&&t.includeContentError(e)}),this.$scope.$on("kendoWidgetCreated",function(e,o){o instanceof kendo.ui.Grid&&t.$parentGrid&&t.$childGrids.push(o)}),this.$scope.$on("$destroy",this._$destroy.bind(this))}},{key:"_$createChildDs",value:function(t){var e=new kendo.data.DataSource({transport:this.$dataProviderService.getTransport("ProjectData",{jsdo:"beViewHistory",tableRef:"ttContractHistory",readLocal:!0}),filter:this._$getChildFilter(t),type:"jsdo",pageSize:5});return"progress-data-provider"===this.$dataProviderService.dataProviders.ProjectData.type&&(e.transport.jsdo=this.$jsdoInstance),e.bind("error",this._$errorHandler.bind(this)),e.bind("change",this._$changeHandler.bind(this)),this.$childDataSources.push(e),e}},{key:"_$dataBoundHandler",value:function(t){var e=this;this.$scope.$evalAsync(function(){e.$parentGrid.select("tr[data-uid]:eq(0)")})}},{key:"_$detailInitHandler",value:function(t){var e=this,o=angular.element('<div class="row"><div class="col-lg-12"><h2 ng-bind-html="childTitle"></h2></div></div><div class="row"><div class="col-lg-12" ng-include="customSections.topChild"></div></div><div class="row"><div class="col-lg-12"><grid data-options="childGridOptions" data-widget="childGridInstance" data-events="childGridEvents"></grid></div></div><div class="row"><div class="col-lg-12" ng-include="customSections.bottomChild"></div></div>').appendTo(t.detailCell),n=this.$scope.$new();this.$model.childGridOptions.dataSource=this._$createChildDs(t.data),angular.extend(n,this.$model),this.$scope.$applyAsync(function(){e.$compile(o)(n)})}},{key:"_$getChildFilter",value:function(t){return{field:"ContractId",operator:"eq",value:t.ContractId}}},{key:"_$errorHandler",value:function(t){var e=this.$dsService.extractErrorMessage(t);this.$scope.$emit("notification",{type:"error",message:e})}},{key:"_$changeHandler",value:function(t){var e=this;if("add"==t.action){var o=t.sender.filter().filters.filter(function(t){return t.field===e.$model.parentField})[0].value;t.items[0].set(this.$model.parentField,o)}}},{key:"_$destroy",value:function(){var t=this;this.$parentDs.unbind("error",this._$errorHandler),this.$childDataSources.forEach(function(e){e.unbind("error",t._$errorHandler),e.unbind("change",t._$changeHandler)})}}]),t}();e.default=i},410:function(t,e,o){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),l=o(400),c=function(t){return t&&t.__esModule?t:{default:t}}(l),d=function(t){function e(t,o,i){return n(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,o))}return i(e,t),a(e,[{key:"includeContentLoaded",value:function(){}},{key:"includeContentError",value:function(t){}},{key:"onShow",value:function(t){console.log("Show")}},{key:"onParentRowSelect",value:function(t){}},{key:"onChildRowSelect",value:function(t){}}]),e}(c.default);d.$inject=["$scope","$injector","stateData"],e.default=d},411:function(t,e,o){"use strict";function n(t,e){function o(){this.scope=null}return o.prototype={onInit:function(t){return console.log("Init",t),{}},onHide:function(t){console.log("hide",t)}},new o}Object.defineProperty(e,"__esModule",{value:!0}),n.$inject=["$q","dsService"],e.default=n},427:function(t,e){t.exports=""},428:function(t,e){t.exports=""},429:function(t,e){t.exports=""},430:function(t,e){t.exports=""},431:function(t,e){t.exports=""}});
webpackJsonp([6],{381:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),i=o(r),s=n(399),a=(o(s),n(408)),d=o(a),c=n(409),l=o(c),u=n(424),h=o(u),$=n(425),f=o($),v=n(426),p=o(v);t.default=i.default.module("views.contracts.contract",[]).controller("ContractsContractCtrl",d.default).factory("contractsContract",l.default).run(["$templateCache",function(e){e.put("views.contracts.contract.bottomSection.html",h.default),e.put("views.contracts.contract.middleSection.html",f.default),e.put("views.contracts.contract.topSection.html",p.default)}]).name},399:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(t,n){var r=this;o(this,e),this.$scope=t,this.$dataProviderService=n.get("providerService"),this.$dsService=n.get("dsService"),this.$viewModels={formModel:{},fkeyModels:{}},this.$ds={},this.$primeDSName="$primeDS",this.$pendingChangeMessage="There are unsaved changes. Do you want to complete the changes before continuing?",this.$window=n.get("$window"),this.$ds[this.$primeDSName]=new kendo.data.DataSource({transport:this.$dataProviderService.getTransport("ProjectData",{jsdo:"beContract"}),type:"jsdo",pageSize:20}),this.$ds[this.$primeDSName].bind("sync",this._$syncHandler.bind(this)).bind("error",this._$errorHandler.bind(this)).bind("change",this._$changeHandler.bind(this)).bind("requestStart",this._$requestStartHandler.bind(this));var i=this;this.$viewModels.fkeyModels["$cachedbeCustomer.ttCustomerFK1DSModel"]={},this.$ds["beCustomer.ttCustomerFK1DS"]=new kendo.data.DataSource({transport:this.$dataProviderService.getTransport("ProjectData",{jsdo:"beCustomer"}),type:"jsdo",change:function(e){var t=e.sender,n=t.view();t.filter()&&t.filter().filters.length>0?n.length>0?i.$viewModels.fkeyModels["$cachedbeCustomer.ttCustomerFK1DSModel"]=n[0]:i.$viewModels.fkeyModels["$cachedbeCustomer.ttCustomerFK1DSModel"]={}:i.$scope.$applyAsync(function(){i.$viewModels.fkeyModels["beCustomer.ttCustomerFK1DSModel"]=i.$viewModels.fkeyModels["$cachedbeCustomer.ttCustomerFK1DSModel"]})}}),this.$ds["beCustomer.ttCustomerFK1DS"].bind("error",this._$errorHandlerForeignKeys.bind(this)),this._$createPristineModel("beCustomer.ttCustomerFK1DS"),this._$watchForeignKeyModel("beCustomer.ttCustomerFK1DSModel","CustomerId","CustomerId"),this.$model={title:"Add Contract",newTitle:"New",editTitle:"Edit",editMode:"Read-Only to Edit",confirmRemove:!0,formOptions:{dataSource:this.$ds[this.$primeDSName]},gridOptions:{pageable:{pageSize:20,refresh:!0},filterable:!1,groupable:!1,resizable:!1,reorderable:!1,sortable:!1,selectable:!0,columns:[{encoded:!0,field:"ContractNr",filterable:!0,format:"",sortable:!0,title:"Contract Nr"},{encoded:!0,field:"ContractStatus",filterable:!0,format:"",sortable:!0,title:"Contract Status"}],dataSource:this.$ds[this.$primeDSName]},customSections:{top:"views.contracts.contract.topSection.html",middle:"views.contracts.contract.middleSection.html",bottom:"views.contracts.contract.bottomSection.html"},events:{onRowSelect:function(e){e.fromView&&r.onRowSelect(e)},onDataBound:function(e){}}},this.$grid=null,this.$requestType="",this.$components={},this.$components.ctl3={events:{onChange:function(e){}},validation:{required:!1}},this.$components.ctl19={widget:null,options:{dataSource:this.$ds["beCustomer.ttCustomerFK1DS"],dataTextField:"IdCode",dataValueField:"CustomerId",valuePrimitive:!1,filter:"none"},events:{onChange:function(e){},onSelect:function(e){},onFilter:function(e){}},validation:{required:!1}},this.$components.ctl7={widget:null,options:{downArrowText:"",format:"c",placeholder:"Amount",upArrowText:"",spinners:!1},events:{onChange:function(e){}},validation:{required:!1}},this.$components.ctl13={widget:null,options:{min:new Date("1899-12-31T22:00:00.000Z"),max:new Date("2099-12-30T22:00:00.000Z"),format:"{0:g}",interval:30},events:{onChange:function(e){}},validation:{required:!1}}}return r(e,[{key:"$onInit",value:function(){var e=this;this.$scope.$on("$includeContentLoaded",function(){e.includeContentLoaded&&e.includeContentLoaded()}),this.$scope.$on("$viewContentLoaded",function(t){e.onShow&&e.onShow(t.currentScope)}),this.$scope.$on("$includeContentError",function(t){e.includeContentError&&e.includeContentError(t)}),this.$scope.$on("kendoWidgetCreated",function(t,n){n instanceof kendo.ui.Grid&&(n.one("dataBound",e._$dataBoundHandler.bind(e)),n.wrapper.on("click",".k-grid-content tr[data-uid]",e._$onChangeEvent.bind(e)))}),this.$scope.$on("$stateChangeStart",this._$routeChange.bind(this)),angular.element(this.$window).on("beforeunload",this._$beforeunloadHandler.bind(this)),this.$validatorOptions={errorTemplate:'<p class="input__required">#=message#</p>'},this.$scope.$on("$destroy",this._$destroy.bind(this))}},{key:"_$routeChange",value:function(e){this.$ds[this.$primeDSName].hasChanges()&&confirm(this.$pendingChangeMessage)&&e.preventDefault()}},{key:"_$beforeunloadHandler",value:function(e){if(this.$ds[this.$primeDSName].hasChanges())return this.$pendingChangeMessage}},{key:"_$createPristineModel",value:function(e){this.$viewModels.fkeyModels[e+"Model"]=this.$dsService.createPristineModel(this.$ds[e])}},{key:"_$watchForeignKeyModel",value:function(e,t,n){var o=this;this.$scope.$watch(function(){return o.$viewModels.fkeyModels[e][n]},function(r,i){var s=o.$viewModels.formModel,a=o.$viewModels.fkeyModels;r&&s[t]!==a[e][n]&&(s[t]=a[e][n])})}},{key:"_$restoreSelection",value:function(){var e=this.$grid.dataSource.get(this.$selectedId);if(e){var t=angular.element("[data-uid='"+e.uid+"']");t.length?this.$grid.select(t):this.$grid.select("tr[data-uid]:eq(0)")}else this.$grid.select("tr[data-uid]:eq(0)")}},{key:"_$createSelection",value:function(){var e=this;this.$viewModels.formModel=kendo.proxyModelSetters(this.$grid.dataItem(this.$grid.select())),this.$selectedId=this.$viewModels.formModel.id,this._$createPristineModel("beCustomer.ttCustomerFK1DS"),this.$ds["beCustomer.ttCustomerFK1DS"].query({filter:{field:"CustomerId",operator:"eq",value:this.$viewModels.formModel.CustomerId}}).then(function(){e.$ds["beCustomer.ttCustomerFK1DS"].filter({})})}},{key:"_$restoreState",value:function(){this.$grid.cancelChanges(),this._$restoreSelection(),this._$createSelection()}},{key:"_$errorHandler",value:function(e){this._$showErrorMessage(e),this.$insertInProcess||"update"!=this.$requestType&&this._$restoreState()}},{key:"_$errorHandlerForeignKeys",value:function(e){this._$showErrorMessage(e)}},{key:"_$showErrorMessage",value:function(e){var t=this.$dsService.extractErrorMessage(e);this.$scope.$emit("notification",{type:"error",message:t})}},{key:"_$syncHandler",value:function(e){var t=this;this.$scope.$evalAsync(function(){t._$restoreSelection(),t._$createSelection(),t.$updateInProcess=t.$insertInProcess=!1})}},{key:"_$dataBoundHandler",value:function(e){var t=this;this.$scope.$evalAsync(function(){t.$grid.select("tr[data-uid]:eq(0)"),t.$model.events.onRowSelect({sender:t.$grid,fromView:!0}),t._$createSelection()})}},{key:"_$changeHandler",value:function(e){var t=this;"add"!=e.action&&"remove"!=e.action&&this.$grid&&this.$scope.$evalAsync(function(){t._$restoreSelection(),t._$createSelection()})}},{key:"_$requestStartHandler",value:function(e){this.$requestType=e.type}},{key:"_$onChangeEvent",value:function(e){var t=this;this.$scope.$evalAsync(function(){t._$createSelection()}),this.$model.events.onRowSelect({sender:this.$grid,fromView:!0})}},{key:"_$edit",value:function(e){this.$updateInProcess=!0}},{key:"_$save",value:function(e){this.$validator.validate()&&this.$grid.saveChanges()}},{key:"_$cancel",value:function(e){this._$restoreState(),this.$updateInProcess=this.$insertInProcess=!1}},{key:"_$insert",value:function(){for(var e in this.$ds)if(this.$ds.hasOwnProperty(e)&&e!==this.$primeDSName){this._$createPristineModel(e);var t="$cached"+e+"Model";this.$viewModels.fkeyModels[t]={}}this.$grid.dataSource.add({});var n=this.$grid.dataSource.data();this.$viewModels.formModel=kendo.proxyModelSetters(n[n.length-1]),this.$selectedId=null,this.$insertInProcess=!0,this.$updateInProcess=!1}},{key:"_$delete",value:function(){var e=this,t=function(){e.$grid.removeRow(e.$grid.select().first()),e.$grid.saveChanges()};this.$model.confirmRemove?this.$scope.$emit("dialog",{title:"Are you sure you want to delete this record?",hint:"The record will be permanently removed.",okButton:{handler:t}}):t()}},{key:"_$destroy",value:function(){for(var e in this.$ds)this.$ds.hasOwnProperty(e)&&(e===this.$primeDSName?this.$ds[e].unbind("sync",this._$syncHandler).unbind("error",this._$errorHandler).unbind("change",this._$changeHandler).unbind("requestStart",this._$requestStartHandler):this.$ds[e].unbind("error",this._$errorHandler));this.$grid.wrapper.off("click",this._$onChangeEvent),angular.element(this.$window).off("beforeunload",this._$beforeunloadHandler)}}]),e}();t.default=i},408:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(399),d=function(e){return e&&e.__esModule?e:{default:e}}(a),c=function(e){function t(e,n,i){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return i(t,e),s(t,[{key:"includeContentLoaded",value:function(){}},{key:"includeContentError",value:function(e){}},{key:"onShow",value:function(e){console.log("Show")}},{key:"onRowSelect",value:function(e){}}]),t}(d.default);c.$inject=["$scope","$injector","stateData"],t.default=c},409:function(e,t,n){"use strict";function o(e,t){function n(){this.scope=null}return n.prototype={onInit:function(e){return console.log("Init",e),{}},onHide:function(e){console.log("hide",e)}},new n}Object.defineProperty(t,"__esModule",{value:!0}),o.$inject=["$q","dsService"],t.default=o},424:function(e,t){e.exports=""},425:function(e,t){e.exports=""},426:function(e,t){e.exports=""}});